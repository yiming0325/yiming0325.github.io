<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Yiming&#39;s blog</title>
  
  <subtitle>Hello,world</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://yiming0325.com/"/>
  <updated>2019-10-17T15:37:17.849Z</updated>
  <id>https://yiming0325.com/</id>
  
  <author>
    <name>YimingYuan</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>虚拟机上网</title>
    <link href="https://yiming0325.com/%E8%99%9A%E6%8B%9F%E6%9C%BA%E4%B8%8A%E7%BD%91/"/>
    <id>https://yiming0325.com/虚拟机上网/</id>
    <published>2019-10-17T15:11:44.000Z</published>
    <updated>2019-10-17T15:37:17.849Z</updated>
    
    <content type="html"><![CDATA[<h1 id="0x00-实验背景"><a href="#0x00-实验背景" class="headerlink" title="0x00 实验背景"></a>0x00 实验背景</h1><p>linux虚拟机通过物理机访问外部网络</p><h1 id="0x01-实验环境"><a href="#0x01-实验环境" class="headerlink" title="0x01 实验环境"></a>0x01 实验环境</h1><p>物理机</p><p>系统版本: RHEL7.3</p><p>IP:172.25.254.1</p><p>网络配置方式：桥接</p><p>虚拟机</p><p>系统版本：RHEL7.0</p><p>IP:172.25.254.2</p><h1 id="0x02-实验步骤"><a href="#0x02-实验步骤" class="headerlink" title="0x02 实验步骤"></a>0x02 实验步骤</h1><h3 id="虚拟机"><a href="#虚拟机" class="headerlink" title="虚拟机"></a>虚拟机</h3><p>开启防火防并且利用防火墙打开地址伪装</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@foundation11 ~]# firewall-cmd --add-masquerade</span><br></pre></td></tr></table></figure><p>打开内核路由功能</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@foundation1 ~]# sysctl -a | grep ip_forward</span><br><span class="line">net.ipv4.ip_forward = 1</span><br><span class="line">如果未开启：</span><br><span class="line">[root@foundation1 ~]# vim /etc/sysctl.conf </span><br><span class="line">net.ipv4.ip_forward=1</span><br></pre></td></tr></table></figure><p>设置网关</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# vim /etc/sysconfig/network</span><br><span class="line">GATEWAY=172.25.254.1</span><br></pre></td></tr></table></figure><p>设置DNS</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# vim /etc/resolv.conf </span><br><span class="line">nameserver 114.114.114.114</span><br></pre></td></tr></table></figure><h3 id="物理机"><a href="#物理机" class="headerlink" title="物理机"></a>物理机</h3><p>开启防火墙，并且利用防火墙打开地址伪装</p><p>打开内核的路由功能</p><h1 id="0x03-测试"><a href="#0x03-测试" class="headerlink" title="0x03 测试"></a>0x03 测试</h1><p>在虚拟机上ping baidu.com</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;0x00-实验背景&quot;&gt;&lt;a href=&quot;#0x00-实验背景&quot; class=&quot;headerlink&quot; title=&quot;0x00 实验背景&quot;&gt;&lt;/a&gt;0x00 实验背景&lt;/h1&gt;&lt;p&gt;linux虚拟机通过物理机访问外部网络&lt;/p&gt;
&lt;h1 id=&quot;0x01-实验环境&quot;
      
    
    </summary>
    
      <category term="Linux" scheme="https://yiming0325.com/categories/Linux/"/>
    
    
      <category term="Linux" scheme="https://yiming0325.com/tags/Linux/"/>
    
      <category term="虚拟机" scheme="https://yiming0325.com/tags/%E8%99%9A%E6%8B%9F%E6%9C%BA/"/>
    
  </entry>
  
</feed>
